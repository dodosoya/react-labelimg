{"version":3,"sources":["components/LabelImg/contexts/StoreContext/actionTypes.js","components/LabelImg/constants.js","components/LabelImg/contexts/StoreContext/reducer.js","components/LabelImg/propTypes.js","components/LabelImg/contexts/StoreContext/index.js","components/LabelImg/utils/index.js","components/LabelImg/components/LeftToolbar/FileTool.js","components/LabelImg/components/LeftToolbar/DrawTool.js","components/LabelImg/components/LeftToolbar/index.js","components/LabelImg/components/SVGWrapper/SVGImage.js","components/LabelImg/contexts/MouseContext/actionTypes.js","components/LabelImg/contexts/MouseContext/reducer.js","components/LabelImg/contexts/MouseContext/index.js","components/LabelImg/components/SVGWrapper/index.js","components/LabelImg/components/RightToolbar/FileList/FileItem.js","components/LabelImg/components/RightToolbar/FileList/index.js","components/LabelImg/components/RightToolbar/FileList/FileListSetting.js","components/LabelImg/components/RightToolbar/LabelList/LabelItem.js","components/LabelImg/components/RightToolbar/LabelList/index.js","components/LabelImg/components/RightToolbar/LabelList/LabelListSetting.js","components/LabelImg/components/RightToolbar/index.js","components/LabelImg/components/StatusInfo/index.js","components/LabelImg/components/LabelBox/index.js","components/LabelImg/components/XMLPreviewBox/index.js","components/LabelImg/components/ImageURLBox/index.js","components/LabelImg/index.js","App.js","reportWebVitals.js","index.js"],"names":["actionTypes","SET_IMAGE_FILES","SET_SEL_DRAW_IMAGE_INDEX","SET_IMAGE_SIZES","SET_SEL_IMAGE_INDEXES","SET_DRAW_STATUS","SET_SEL_SHPAE_TYPE","SET_LABELBOX_STATUS","SET_XML_PREVIEW_BOX_STATUS","SET_URL_BOX_STATUS","SET_CURRENT_SHAPE","SET_SHAPES","SET_SEL_SHAPE_INDEX","SET_LABEL_TYPES","SET_SEL_LABEL_TYPE","DELETE_SEL_SHAPE","DELETE_ALL_SHAPES","drawStatusTypes","labelStatusTypes","shapeTypes","shapeTypeOptions","value","label","defaultSaveFolder","imageTypes","state","action","type","payload","imageFiles","selDrawImageIndex","selImageIndexes","imageSizes","drawStatus","currentShape","shapes","selShapeIndex","drawStyle","selShapeType","selLabelType","labelBoxVisible","labelBoxStatus","selPreviewIndex","xmlPreviewBoxVisible","urlBoxVisible","map","item","index","subItem","subIndex","newSubItem","cloneDeep","isSelect","labelTypes","filter","coordinatePropTypes","PropTypes","number","x","y","shapeStylePropTypes","string","bool","arrayOf","shape","cursor","fill","fillOpacity","stroke","strokeWidth","drawingShapePathStylePropTypes","strokeLinecap","oneOf","strokeLinejoin","strokeDasharray","drawingShapePointStylePropTypes","labelStylePropTypes","fontSize","fontWeight","StoreContext","createContext","dispatch","StoreContextProvider","initialState","children","useReducer","reducer","Provider","useStoreContext","store","useContext","Error","getImage","imageUrl","fileName","Promise","resolve","reject","img","Image","crossOrigin","src","onload","width","this","height","canvas","document","createElement","ctx","getContext","drawImage","toBlob","blob","file","File","size","onerror","getImageSize","coordinateFactory","getSVGPathD","paths","isFinish","d","reduce","accumulator","currentValue","currentIndex","getShapeXYMaxMin","xmin","acc","cur","Number","MAX_SAFE_INTEGER","ymin","xmax","ymax","drawStyleFactory","shapeStyle","Math","round","selShapeStyle","drawingShapePathStyle","drawingShapePointStyle","labelStyle","imageSizeFactory","depth","generateXML","annotation","folder","filename","name","path","source","database","segmented","object","annotationFactory","pose","truncated","difficult","bndbox","annotationObjectFactory","obj","xmlStr","J2xParser","format","parse","error","console","message","exportZip","files","xmls","zip","JSZip","forEach","split","generateAsync","then","content","saveAs","dateObj","year","getFullYear","month","getMonth","toString","fMonth","length","date","getDate","fDate","hour","getHours","fHour","minute","getMinutes","fMinute","second","getSeconds","fSecond","convertDateToString","Date","FileTool","onFilesChange","event","target","indexOf","url","trim","toLowerCase","newImageFiles","newImageSizes","newShapes","msg","success","onUrlClick","a","className","accept","join","multiple","onChange","style","display","webkitdirectory","directory","onClick","info","DrawTool","onResetClick","shapesCopy","itemCopy","justify","gutter","xs","textAlign","Group","direction","Button","disabled","LeftToolbar","margin","SVGImage","href","preserveAspectRatio","SET_MOUSE_COORDINATE","mouseCoordinate","MouseContext","MouseContextProvider","useMouseContext","SVGWrapper","svgRef","useRef","mouseState","mouseDispatch","closePointRegion","useEffect","objURL","window","URL","createObjectURL","isValidCoordinate","current","abs","imageProps","useMemo","resetDrawStatus","isLeftMouseClick","button","ref","viewBox","onMouseMove","coordinate","CTM","getScreenCTM","parseInt","clientX","e","clientY","f","getMouseCoordinate","mouseActionTypes","currentShapeCopy","point1","point3","point2","point4","exactPathCount","movingRectangle","push","movingPolygon","onMouseUp","newShape","visible","shapeFactory","drawPolygonPoint","point","cx","cy","r","uuidv4","stopPropagation","onShapeMouseUp","FileItem","props","fileIndex","padding","checked","set","Set","add","delete","title","color","danger","icon","DeleteOutlined","newSelDrawImageIndex","FileList","overflow","FileListSetting","onSelectClick","isAll","indexes","menu","Item","xml","overlay","placement","arrow","SettingOutlined","LabelItem","EyeInvisibleOutlined","EyeOutlined","EditOutlined","splice","LabelList","LabelListSetting","onShowAllClick","Panel","Collapse","RightToolbar","bordered","expandIconPosition","defaultActiveKey","header","collapsible","extra","StatusInfo","align","LabelBox","draggleRef","useState","setDisabled","left","top","bottom","right","bounds","setBounds","maskClosable","onMouseOver","prev","onMouseOut","onFocus","onBlur","onOk","pop","has","onCancel","modalRender","modal","onStart","uiData","documentElement","clientWidth","clientHeight","targetRect","getBoundingClientRect","okButtonProps","allowClear","maxHeight","TextArea","Input","XMLPreviewBox","fileType","Blob","download","dataset","downloadurl","click","exportXML","okText","rows","Option","Select","ImageURLBox","setImageUrl","imageName","setImageName","imageType","setImageType","loading","setLoading","confirmLoading","placeholder","toUpperCase","LabelImg","initialStoreState","onContextMenu","preventDefault","addEventListener","removeEventListener","md","defaultProps","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3b75c174.chunk.js","sourcesContent":["const actionTypes = {\n  SET_IMAGE_FILES: 'SET_IMAGE_FILES',\n  SET_SEL_DRAW_IMAGE_INDEX: 'SET_SEL_DRAW_IMAGE_INDEX',\n  SET_IMAGE_SIZES: 'SET_IMAGE_SIZES',\n  SET_SEL_IMAGE_INDEXES: 'SET_SEL_IMAGE_INDEXES',\n  SET_DRAW_STATUS: 'SET_DRAW_STATUS',\n  SET_SEL_SHPAE_TYPE: 'SET_SEL_SHPAE_TYPE',\n  SET_LABELBOX_STATUS: 'SET_LABELBOX_STATUS',\n  SET_XML_PREVIEW_BOX_STATUS: 'SET_XML_PREVIEW_BOX_STATUS',\n  SET_URL_BOX_STATUS: 'SET_URL_BOX_STATUS',\n  SET_CURRENT_SHAPE: 'SET_CURRENT_SHAPE',\n  SET_SHAPES: 'SET_SHAPES',\n  SET_SEL_SHAPE_INDEX: 'SET_SEL_SHAPE_INDEX',\n  SET_LABEL_TYPES: 'SET_LABEL_TYPES',\n  SET_SEL_LABEL_TYPE: 'SET_SEL_LABEL_TYPE',\n  DELETE_SEL_SHAPE: 'DELETE_SEL_SHAPE',\n  DELETE_ALL_SHAPES: 'DELETE_ALL_SHAPES'\n};\n\nexport default actionTypes;\n","export const drawStatusTypes = {\n  IDLE: 'IDLE',\n  DRAWING: 'DRAWING',\n  SELECT: 'SELECT'\n};\n\nexport const labelStatusTypes = {\n  IDLE: 'IDLE',\n  CREATE: 'CREATE',\n  UPDATE: 'UPDATE'\n};\n\nexport const shapeTypes = {\n  RECTANGLE: 'rectangle',\n  POLYGON: 'polygon'\n};\nexport const shapeTypeOptions = [\n  { value: shapeTypes.RECTANGLE, label: 'Rectangle' },\n  { value: shapeTypes.POLYGON, label: 'Polygon' }\n];\n\nexport const defaultSaveFolder = 'labels';\n\nexport const imageTypes = ['jpg', 'jpeg', 'png'];\n","import { cloneDeep } from 'lodash';\nimport actionTypes from './actionTypes';\nimport { drawStatusTypes } from '../../constants';\n\nexport default (state, action) => {\n  const { type, payload } = action;\n\n  switch (type) {\n    case actionTypes.SET_IMAGE_FILES:\n      return {\n        ...state,\n        imageFiles: payload.imageFiles,\n        selDrawImageIndex: payload.selDrawImageIndex,\n        selImageIndexes: [],\n        imageSizes: payload.imageSizes,\n        drawStatus: payload.drawStatus,\n        currentShape: null,\n        shapes: payload.shapes,\n        selShapeIndex: payload.selShapeIndex\n      };\n    case actionTypes.SET_SEL_DRAW_IMAGE_INDEX:\n      return {\n        ...state,\n        selDrawImageIndex: payload.selDrawImageIndex,\n        drawStatus: drawStatusTypes.IDLE,\n        currentShape: null,\n        selShapeIndex: null\n      };\n    case actionTypes.SET_IMAGE_SIZES:\n      return {\n        ...state,\n        imageSizes: payload.imageSizes,\n        drawStyle: payload.drawStyle\n      };\n    case actionTypes.SET_SEL_IMAGE_INDEXES:\n      return {\n        ...state,\n        selImageIndexes: payload.selImageIndexes\n      };\n    case actionTypes.SET_DRAW_STATUS:\n      return {\n        ...state,\n        drawStatus: payload.drawStatus\n      };\n    case actionTypes.SET_SEL_SHPAE_TYPE:\n      return {\n        ...state,\n        selShapeType: payload.selShapeType\n      };\n    case actionTypes.SET_LABELBOX_STATUS:\n      return {\n        ...state,\n        selLabelType: payload.selLabelType,\n        labelBoxVisible: payload.labelBoxVisible,\n        labelBoxStatus: payload.labelBoxStatus\n      };\n    case actionTypes.SET_XML_PREVIEW_BOX_STATUS:\n      return {\n        ...state,\n        selPreviewIndex: payload.selPreviewIndex,\n        xmlPreviewBoxVisible: payload.xmlPreviewBoxVisible\n      };\n    case actionTypes.SET_URL_BOX_STATUS:\n      return {\n        ...state,\n        urlBoxVisible: payload.urlBoxVisible\n      };\n    case actionTypes.SET_CURRENT_SHAPE:\n      return {\n        ...state,\n        currentShape: payload.currentShape\n      };\n    case actionTypes.SET_SHAPES:\n      return {\n        ...state,\n        currentShape: null,\n        shapes: payload.shapes\n      };\n    case actionTypes.SET_SEL_SHAPE_INDEX:\n      return {\n        ...state,\n        drawStatus: payload.selShapeIndex === null\n          ? drawStatusTypes.IDLE : drawStatusTypes.SELECT,\n        shapes: state.shapes.map((item, index) => {\n          if (index !== state.selDrawImageIndex) return item;\n          return item.map((subItem, subIndex) => {\n            const newSubItem = cloneDeep(subItem);\n            newSubItem.isSelect = (subIndex === payload.selShapeIndex);\n            return newSubItem;\n          });\n        }),\n        selShapeIndex: payload.selShapeIndex\n      };\n    case actionTypes.SET_LABEL_TYPES:\n      return {\n        ...state,\n        labelTypes: payload.labelTypes\n      };\n    case actionTypes.SET_SEL_LABEL_TYPE:\n      return {\n        ...state,\n        selLabelType: payload.selLabelType\n      };\n    case actionTypes.DELETE_SEL_SHAPE:\n      return {\n        ...state,\n        drawStatus: drawStatusTypes.IDLE,\n        shapes: state.shapes.map((item, index) => (\n          index === state.selDrawImageIndex\n            ? item.filter((subItem, subIndex) => subIndex !== state.selShapeIndex)\n            : item\n        )),\n        selShapeIndex: null\n      };\n    case actionTypes.DELETE_ALL_SHAPES:\n      return {\n        ...state,\n        drawStatus: drawStatusTypes.IDLE,\n        currentShape: null,\n        shapes: state.shapes.map((item, index) => (\n          index === state.selDrawImageIndex ? [] : item\n        )),\n        selShapeIndex: null\n      };\n    default:\n      return state;\n  }\n};\n","import PropTypes from 'prop-types';\n\nexport const imageSizePropTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  depth: PropTypes.number\n};\n\nexport const coordinatePropTypes = {\n  x: PropTypes.number,\n  y: PropTypes.number\n};\n\nexport const shapePropTypes = {\n  label: PropTypes.string,\n  visible: PropTypes.bool,\n  isSelect: PropTypes.bool,\n  exactPathCount: PropTypes.number,\n  paths: PropTypes.arrayOf(PropTypes.shape(coordinatePropTypes)),\n  d: PropTypes.string\n};\n\nexport const shapeStylePropTypes = {\n  cursor: PropTypes.string,\n  fill: PropTypes.string,\n  fillOpacity: PropTypes.number,\n  stroke: PropTypes.string,\n  strokeWidth: PropTypes.number\n};\n\nexport const drawingShapePathStylePropTypes = {\n  ...shapeStylePropTypes,\n  strokeLinecap: PropTypes.oneOf(['butt', 'round', 'square']),\n  strokeLinejoin: PropTypes.oneOf(['butt', 'round', 'square']),\n  strokeDasharray: PropTypes.string\n};\n\nexport const drawingShapePointStylePropTypes = {\n  fill: PropTypes.string,\n  fillOpacity: PropTypes.number,\n  stroke: PropTypes.string,\n  strokeWidth: PropTypes.number\n};\n\nexport const labelStylePropTypes = {\n  fill: PropTypes.string,\n  fontSize: PropTypes.number,\n  fontWeight: PropTypes.string\n};\n\nexport const drawStylePropTypes = {\n  shapeStyle: PropTypes.shape(shapeStylePropTypes),\n  selShapeStyle: PropTypes.shape(shapeStylePropTypes),\n  drawingShapePathStyle: PropTypes.shape(drawingShapePathStylePropTypes),\n  drawingShapePointStyle: PropTypes.shape(drawingShapePointStylePropTypes),\n  labelStyle: PropTypes.shape(labelStylePropTypes)\n};\n","import { createContext, useContext, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport reducer from './reducer';\nimport {\n  imageSizePropTypes, shapePropTypes, drawStylePropTypes\n} from '../../propTypes';\n\nconst StoreContext = createContext({\n  dispatch: () => null,\n  state: null\n});\n\nconst StoreContextProvider = ({ initialState, children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  return (\n    <StoreContext.Provider value={{ state, dispatch }}>{children}</StoreContext.Provider>\n  );\n};\n\nconst useStoreContext = () => {\n  const store = useContext(StoreContext);\n  if (!store) {\n    throw new Error('Cannot use `useStoreContextContext` outside of StoreContextProvider');\n  }\n  return store;\n};\n\nStoreContextProvider.propTypes = {\n  initialState: PropTypes.shape({\n    imageFiles: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.object)),\n    selDrawImageIndex: PropTypes.number,\n    selImageIndexes: PropTypes.arrayOf(PropTypes.number),\n    imageSize: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.shape(imageSizePropTypes))),\n    drawStyle: PropTypes.shape(drawStylePropTypes),\n    drawSatus: PropTypes.string,\n    selShapeType: PropTypes.string,\n    currentShape: PropTypes.shape(shapePropTypes),\n    shapes: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.shape(shapePropTypes))),\n    selShapeIndex: PropTypes.number,\n    labelTypes: PropTypes.arrayOf(PropTypes.string),\n    selLabelType: PropTypes.string,\n    labelBoxStatus: PropTypes.string,\n    labelBoxVisible: PropTypes.bool,\n    selPreviewIndex: PropTypes.number,\n    xmlPreviewBoxVisible: PropTypes.bool,\n    urlBoxVisible: PropTypes.bool,\n    closePointRegion: PropTypes.number\n  }).isRequired\n};\n\nexport {\n  StoreContextProvider, useStoreContext\n};\n","import { j2xParser as J2xParser } from 'fast-xml-parser';\nimport JSZip from 'jszip';\nimport { saveAs } from 'file-saver';\nimport { defaultSaveFolder } from '../constants';\n\nexport const getImage = (imageUrl, fileName = 'image.jpg') => (\n  new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.src = imageUrl;\n    img.onload = function onload() {\n      const { width, height } = this;\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      canvas.width = width;\n      canvas.height = height;\n      ctx.drawImage(this, 0, 0);\n      canvas.toBlob(blob => {\n        resolve({\n          file: new File([blob], fileName, { type: blob.type }),\n          size: { width, height }\n        });\n      }, 'image/jpeg', 1.0);\n    };\n    img.onerror = function onerror() {\n      reject(new Error('load image error'));\n    };\n  })\n);\n\nexport const getImageSize = imageUrl => (\n  new Promise((resolve, reject) => {\n    const img = new Image();\n    img.src = imageUrl;\n    img.onload = function onload() {\n      const { width, height } = this;\n      resolve({ width, height });\n    };\n    img.onerror = function onerror() {\n      reject(new Error('load image error'));\n    };\n  })\n);\n\nexport const getURLExtension = url => (\n  url.trim().split('.')[1]\n);\n\nexport const coordinateFactory = ({ x, y }) => ({ x, y });\n\n// 將座標列表轉為 SVG path 的路徑\nexport const getSVGPathD = (paths, isFinish) => {\n  let d = paths.reduce((accumulator, currentValue, currentIndex) => {\n    if (currentIndex === 0) return `${accumulator}M${currentValue.x},${currentValue.y} `;\n    return `${accumulator}L${currentValue.x},${currentValue.y} `;\n  }, '');\n  if (isFinish) d += 'Z';\n  return d;\n};\n\nexport const getShapeXYMaxMin = paths => ({\n  xmin: paths.reduce((acc, cur) => (acc < cur.x ? acc : cur.x), Number.MAX_SAFE_INTEGER),\n  ymin: paths.reduce((acc, cur) => (acc < cur.y ? acc : cur.y), Number.MAX_SAFE_INTEGER),\n  xmax: paths.reduce((acc, cur) => (acc > cur.x ? acc : cur.x), -Number.MAX_SAFE_INTEGER),\n  ymax: paths.reduce((acc, cur) => (acc > cur.y ? acc : cur.y), -Number.MAX_SAFE_INTEGER)\n});\n\nexport const drawStyleFactory = value => ({\n  shapeStyle: {\n    cursor: 'pointer',\n    fill: '#1890ff',\n    fillOpacity: 0.2,\n    stroke: '#1890ff',\n    strokeWidth: Math.round(value * 0.004)\n  },\n  selShapeStyle: {\n    cursor: 'pointer',\n    fill: '#ffff00',\n    fillOpacity: 0.2,\n    stroke: '#ffff00',\n    strokeWidth: Math.round(value * 0.004)\n  },\n  drawingShapePathStyle: {\n    fill: '#ffff00',\n    fillOpacity: 0.2,\n    stroke: '#ffff00',\n    strokeWidth: Math.round(value * 0.004),\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n    strokeDasharray: `${Math.round(value * 0.008)}, ${Math.round(value * 0.008)}`\n  },\n  drawingShapePointStyle: {\n    fill: '#ffff00',\n    fillOpacity: 1,\n    stroke: 'transparent',\n    strokeWidth: Math.round(value * 0.008)\n  },\n  labelStyle: {\n    fill: '#000000d9',\n    fontSize: Math.round(value * 0.02),\n    fontWeight: 'bold'\n  }\n});\n\nexport const shapeFactory = coordinate => {\n  const paths = [coordinate];\n  const d = getSVGPathD(paths, false);\n  return {\n    label: '',\n    visible: true,\n    isSelect: false,\n    exactPathCount: 1,\n    paths,\n    d\n  };\n};\n\nexport const imageSizeFactory = ({ width = 0, height = 0, depth = 3 }) => ({\n  width,\n  height,\n  depth\n});\n\nexport const annotationFactory = file => ({\n  folder: defaultSaveFolder,\n  filename: file.name,\n  path: `./${defaultSaveFolder}/${file.name}`,\n  source: {\n    database: 'Unknown'\n  },\n  size: {\n    width: 0,\n    height: 0,\n    depth: 3\n  },\n  segmented: 0,\n  object: []\n});\n\nexport const annotationObjectFactory = shape => ({\n  name: shape.label,\n  pose: 'Unspecified',\n  truncated: 0,\n  difficult: 0,\n  bndbox: getShapeXYMaxMin(shape.paths)\n});\n\n// convert date object to string (format: YYYYMMDDhhmmss)\nexport const convertDateToString = dateObj => {\n  const year = dateObj.getFullYear();\n  const month = (dateObj.getMonth() + 1).toString();\n  const fMonth = month.length === 1 ? `0${month}` : month;\n  const date = dateObj.getDate().toString();\n  const fDate = date.length === 1 ? `0${date}` : date;\n  const hour = dateObj.getHours().toString();\n  const fHour = hour.length === 1 ? `0${hour}` : hour;\n  const minute = dateObj.getMinutes().toString();\n  const fMinute = minute.length === 1 ? `0${minute}` : minute;\n  const second = dateObj.getSeconds().toString();\n  const fSecond = second.length === 1 ? `0${second}` : second;\n  return `${year}${fMonth}${fDate}${fHour}${fMinute}${fSecond}`;\n};\n\nexport const generateXML = (file, size, shapes) => {\n  const annotation = annotationFactory(file);\n  annotation.size = imageSizeFactory(size);\n  annotation.object = shapes.map(shape => annotationObjectFactory(shape));\n  const obj = { annotation };\n  let xmlStr = '';\n  try {\n    xmlStr = new J2xParser({ format: true }).parse(obj);\n  } catch (error) {\n    console.error(error.message);\n  }\n  return xmlStr;\n};\n\nexport const exportXML = (xmlStr, fileName = 'label.xml') => {\n  const fileType = '.xml';\n  const blob = new Blob([xmlStr], { type: fileType });\n  const a = document.createElement('a');\n  a.download = fileName;\n  a.href = window.URL.createObjectURL(blob);\n  a.dataset.downloadurl = [fileType, a.download, a.href].join(':');\n  a.click();\n};\n\nexport const exportZip = (files, xmls) => {\n  const zip = new JSZip();\n  const folder = zip.folder(defaultSaveFolder);\n  files.forEach((file, index) => {\n    folder.file(file.name, file);\n    folder.file(`${file.name.split('.')[0]}.xml`, xmls[index]);\n  });\n  zip.generateAsync({ type: 'blob' })\n    .then(content => {\n      saveAs(content, `${convertDateToString(new Date())}.zip`);\n    });\n};\n","import { message } from 'antd';\nimport { useStoreContext } from '../../contexts/StoreContext';\nimport actionTypes from '../../contexts/StoreContext/actionTypes';\nimport { imageTypes } from '../../constants';\nimport {\n  getURLExtension, imageSizeFactory, generateXML, exportZip\n} from '../../utils';\n\nfunction FileTool() {\n  const { state, dispatch } = useStoreContext();\n  const {\n    imageFiles, selDrawImageIndex, imageSizes, drawStatus, shapes, selShapeIndex\n  } = state;\n\n  const onFilesChange = event => {\n    // only allow image file\n    const files = [...event.target.files].filter(file => (\n      imageTypes.indexOf(getURLExtension(file.name).toLowerCase()) !== -1\n    ));\n    if (files.length === 0) return;\n    const newImageFiles = [...imageFiles, ...files];\n    const newImageSizes = newImageFiles.map((item, index) => (\n      imageSizes[index] ? imageSizes[index] : imageSizeFactory({})\n    ));\n    const newShapes = newImageFiles.map((item, index) => (shapes[index] ? shapes[index] : []));\n    dispatch({\n      type: actionTypes.SET_IMAGE_FILES,\n      payload: {\n        imageFiles: newImageFiles,\n        selDrawImageIndex: imageFiles.length ? selDrawImageIndex : 0,\n        imageSizes: newImageSizes,\n        drawStatus,\n        shapes: newShapes,\n        selShapeIndex\n      }\n    });\n    const msg = files.length > 1 ? `${files.length} images` : `${files.length} image`;\n    message.success(`Success to load ${msg}.`);\n  };\n\n  const onUrlClick = async () => {\n    dispatch({\n      type: actionTypes.SET_URL_BOX_STATUS,\n      payload: { urlBoxVisible: true }\n    });\n  };\n\n  const onNextImageClick = () => {\n    if (!imageFiles.length || imageFiles.length < 2) return;\n    let index = selDrawImageIndex + 1;\n    if (index >= imageFiles.length) index = 0;\n    dispatch({ type: actionTypes.SET_SEL_SHAPE_INDEX, payload: { selShapeIndex: null } });\n    dispatch({ type: actionTypes.SET_SEL_DRAW_IMAGE_INDEX, payload: { selDrawImageIndex: index } });\n  };\n\n  const onPrevImageClick = () => {\n    if (!imageFiles.length || imageFiles.length < 2) return;\n    let index = selDrawImageIndex - 1;\n    if (index < 0) index = imageFiles.length - 1;\n    dispatch({ type: actionTypes.SET_SEL_SHAPE_INDEX, payload: { selShapeIndex: null } });\n    dispatch({ type: actionTypes.SET_SEL_DRAW_IMAGE_INDEX, payload: { selDrawImageIndex: index } });\n  };\n\n  const onSaveClick = () => {\n    if (imageFiles.length === 0) {\n      message.info('No images are loaded.');\n      return;\n    }\n    const xmls = imageFiles.map((file, index) => (\n      generateXML(file, imageSizes[index], shapes[index])\n    ));\n    exportZip(imageFiles, xmls);\n  };\n\n  return (\n    <ul className=\"file-tool-container\">\n      <li>\n        <label>\n          <span>Open</span>\n          <input\n            type=\"file\"\n            accept={imageTypes.map(type => `.${type}`).join(',')}\n            multiple\n            onChange={onFilesChange}\n            style={{ display: 'none' }}\n          />\n        </label>\n      </li>\n      <li>\n        <label>\n          <span>Open Dir</span>\n          <input\n            type=\"file\"\n            accept={imageTypes.map(type => `.${type}`).join(',')}\n            webkitdirectory=\"true\"\n            directory=\"true\"\n            multiple\n            onChange={onFilesChange}\n            style={{ display: 'none' }}\n          />\n        </label>\n      </li>\n      <li>\n        <span onClick={onUrlClick}>Open URL</span>\n      </li>\n      <li>\n        <span onClick={onNextImageClick}>Next Image</span>\n      </li>\n      <li>\n        <span onClick={onPrevImageClick}>Prev Image</span>\n      </li>\n      <li>\n        <span onClick={onSaveClick}>Save</span>\n      </li>\n    </ul>\n  );\n}\n\nexport default FileTool;\n","import {\n  Row, Col, Button, Radio, Space\n} from 'antd';\nimport { cloneDeep } from 'lodash';\nimport { useStoreContext } from '../../contexts/StoreContext';\nimport actionTypes from '../../contexts/StoreContext/actionTypes';\nimport { drawStatusTypes, shapeTypeOptions } from '../../constants';\n\nfunction DrawTool() {\n  const { state, dispatch } = useStoreContext();\n  const {\n    selDrawImageIndex, selShapeType, selShapeIndex, currentShape, shapes\n  } = state;\n\n  const onResetClick = () => {\n    const shapesCopy = cloneDeep(shapes);\n    shapesCopy[selDrawImageIndex] = shapesCopy[selDrawImageIndex].map(item => {\n      if (!item.isSelect) return item;\n      const itemCopy = cloneDeep(item);\n      itemCopy.isSelect = false;\n      return itemCopy;\n    });\n    dispatch({ type: actionTypes.SET_SHAPES, payload: { shapes: shapesCopy } });\n    dispatch({\n      type: actionTypes.SET_DRAW_STATUS,\n      payload: { drawStatus: drawStatusTypes.IDLE }\n    });\n  };\n\n  const onSelShapeTypeChange = event => {\n    if (event.target.value === selShapeType) return;\n    dispatch({\n      type: actionTypes.SET_SEL_SHPAE_TYPE,\n      payload: { selShapeType: event.target.value }\n    });\n    onResetClick();\n  };\n\n  const onClearSelShapeClick = () => {\n    dispatch({ type: actionTypes.DELETE_SEL_SHAPE });\n  };\n\n  const onClearAllClick = () => {\n    dispatch({ type: actionTypes.DELETE_ALL_SHAPES });\n  };\n\n  return (\n    <Row type=\"flex\" justify=\"center\" gutter={[0, 12]}>\n      <Col xs={24} style={{ textAlign: 'center' }}>\n        <Radio.Group\n          value={selShapeType}\n          onChange={onSelShapeTypeChange}\n        >\n          <Space direction=\"vertical\" style={{ width: '100%' }}>\n            {shapeTypeOptions.map(item => (\n              <Radio.Button\n                key={item.value}\n                value={item.value}\n                style={{ width: '100%' }}\n              >\n                {item.label}\n              </Radio.Button>\n            ))}\n          </Space>\n        </Radio.Group>\n      </Col>\n      <Col xs={24}>\n        <Button\n          type=\"text\"\n          onClick={onResetClick}\n          disabled={currentShape === null}\n          style={{ width: '100%' }}\n        >\n          Reset\n        </Button>\n      </Col>\n      <Col xs={24}>\n        <Button\n          type=\"text\"\n          onClick={onClearSelShapeClick}\n          disabled={selShapeIndex === null}\n          style={{ width: '100%' }}\n        >\n          Clear Select\n        </Button>\n      </Col>\n      <Col xs={24}>\n        <Button\n          type=\"text\"\n          onClick={onClearAllClick}\n          disabled={!shapes[selDrawImageIndex] || shapes[selDrawImageIndex].length === 0}\n          style={{ width: '100%' }}\n        >\n          Clear All\n        </Button>\n      </Col>\n    </Row>\n  );\n}\n\nexport default DrawTool;\n","import { Divider } from 'antd';\nimport FileTool from './FileTool';\nimport DrawTool from './DrawTool';\n\nconst LeftToolbar = () => (\n  <>\n    <FileTool />\n    <Divider style={{ margin: '0 0 16px 0' }} />\n    <DrawTool />\n  </>\n);\n\nexport default LeftToolbar;\n","import PropTypes from 'prop-types';\n\nconst SVGImage = ({ href, width, height }) => (\n  <image\n    href={href}\n    width={width}\n    height={height}\n    preserveAspectRatio=\"xMidYMid slice\"\n  />\n);\n\nSVGImage.propTypes = {\n  href: PropTypes.string.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired\n};\n\nexport default SVGImage;\n","const actionTypes = {\n  SET_MOUSE_COORDINATE: 'SET_MOUSE_COORDINATE'\n};\n\nexport default actionTypes;\n","import actionTypes from './actionTypes';\n\nexport default (state, action) => {\n  const { type, payload } = action;\n\n  switch (type) {\n    case actionTypes.SET_MOUSE_COORDINATE:\n      return {\n        ...state,\n        mouseCoordinate: payload.mouseCoordinate\n      };\n    default:\n      return state;\n  }\n};\n","import { createContext, useContext, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport reducer from './reducer';\nimport { coordinatePropTypes } from '../../propTypes';\n\nconst MouseContext = createContext({\n  state: null,\n  dispatch: () => null\n});\n\nconst MouseContextProvider = ({ initialState, children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  return (\n    <MouseContext.Provider value={{ state, dispatch }}>{children}</MouseContext.Provider>\n  );\n};\n\nconst useMouseContext = () => {\n  const store = useContext(MouseContext);\n  if (!store) {\n    throw new Error('Cannot use `useMouseContextContext` outside of MouseContextProvider');\n  }\n  return store;\n};\n\nMouseContextProvider.propTypes = {\n  initialState: PropTypes.shape({\n    mouseCoordinate: PropTypes.shape(coordinatePropTypes)\n  }).isRequired\n};\n\nexport {\n  MouseContextProvider, useMouseContext\n};\n","import { useEffect, useRef, useMemo } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { cloneDeep } from 'lodash';\nimport SVGImage from './SVGImage';\nimport { useStoreContext } from '../../contexts/StoreContext';\nimport { useMouseContext } from '../../contexts/MouseContext';\nimport actionTypes from '../../contexts/StoreContext/actionTypes';\nimport mouseActionTypes from '../../contexts/MouseContext/actionTypes';\nimport {\n  getImageSize, coordinateFactory, getSVGPathD, getShapeXYMaxMin,\n  drawStyleFactory, shapeFactory, imageSizeFactory\n} from '../../utils';\nimport {\n  drawStatusTypes, labelStatusTypes, shapeTypes\n} from '../../constants';\n\nfunction SVGWrapper() {\n  const svgRef = useRef(null);\n  const { state, dispatch } = useStoreContext();\n  const { state: mouseState, dispatch: mouseDispatch } = useMouseContext();\n  const {\n    imageFiles, selDrawImageIndex, imageSizes, currentShape,\n    drawStyle, drawStatus, selShapeType, selShapeIndex, shapes,\n    selLabelType, closePointRegion\n  } = state;\n  const {\n    shapeStyle, selShapeStyle, drawingShapePathStyle, drawingShapePointStyle, labelStyle\n  } = drawStyle;\n  const { mouseCoordinate } = mouseState;\n\n  useEffect(async () => {\n    if (selDrawImageIndex === null || imageFiles.length === 0) return;\n\n    const objURL = window.URL.createObjectURL(imageFiles[selDrawImageIndex]);\n    try {\n      const size = await getImageSize(objURL);\n      const { width, height } = size;\n      dispatch({\n        type: actionTypes.SET_IMAGE_SIZES,\n        payload: {\n          imageSizes: imageSizes.map((item, index) => (\n            index === selDrawImageIndex ? imageSizeFactory({ width, height }) : item\n          )),\n          drawStyle: drawStyleFactory(width > height ? width : height)\n        }\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }, [imageFiles, selDrawImageIndex]);\n\n  const isValidCoordinate = ({ x, y }) => (\n    x >= 0 && x <= imageSizes[selDrawImageIndex].width\n    && y >= 0 && y <= imageSizes[selDrawImageIndex].height\n  );\n\n  useEffect(() => {\n    if (imageFiles.length === 0) return;\n    if (isValidCoordinate({ ...mouseCoordinate })) {\n      svgRef.current.style.cursor = 'crosshair';\n      if (currentShape && currentShape.paths.length > 0) {\n        // \bchange cursor when the current point is equal to the first point\n        if (selShapeType === shapeTypes.POLYGON\n          && Math.abs(currentShape.paths[0].x - mouseCoordinate.x) <= closePointRegion\n          && Math.abs(currentShape.paths[0].y - mouseCoordinate.y) <= closePointRegion\n        ) {\n          svgRef.current.style.cursor = 'pointer';\n        } else {\n          svgRef.current.style.cursor = 'crosshair';\n        }\n      }\n    } else {\n      svgRef.current.style.cursor = 'not-allowed';\n    }\n  }, [imageFiles, currentShape, mouseCoordinate]);\n\n  const imageProps = useMemo(() => {\n    if (selDrawImageIndex === null) {\n      return { href: '', width: 0, height: 0 };\n    }\n    return {\n      href: window.URL.createObjectURL(imageFiles[selDrawImageIndex]),\n      width: imageSizes[selDrawImageIndex].width,\n      height: imageSizes[selDrawImageIndex].height\n    };\n  }, [imageFiles, selDrawImageIndex, imageSizes]);\n\n  const getMouseCoordinate = event => {\n    if (!event) return coordinateFactory({ x: 0, y: 0 });\n\n    const CTM = svgRef.current.getScreenCTM();\n    if (!CTM) return coordinateFactory({ x: 0, y: 0 });\n    return coordinateFactory({\n      x: parseInt((event.clientX - CTM.e) / CTM.a, 10),\n      y: parseInt((event.clientY - CTM.f) / CTM.d, 10)\n    });\n  };\n\n  // reset draw status\n  const resetDrawStatus = () => {\n    dispatch({\n      type: actionTypes.SET_DRAW_STATUS,\n      payload: { drawStatus: drawStatusTypes.IDLE }\n    });\n    svgRef.current.style.cursor = 'crosshair';\n  };\n\n  const movingRectangle = coordinate => {\n    const currentShapeCopy = cloneDeep(currentShape);\n    const point1 = currentShapeCopy.paths[0];\n    const point3 = coordinate;\n    const point2 = { x: point1.x, y: point3.y };\n    const point4 = { x: point3.x, y: point1.y };\n    currentShapeCopy.paths = [point1, point2, point3, point4, point1];\n    currentShapeCopy.exactPathCount = currentShapeCopy.paths.length - 1;\n    currentShapeCopy.d = getSVGPathD(currentShapeCopy.paths, false);\n    dispatch({\n      type: actionTypes.SET_CURRENT_SHAPE,\n      payload: { currentShape: currentShapeCopy }\n    });\n  };\n\n  const movingPolygon = coordinate => {\n    const currentShapeCopy = cloneDeep(currentShape);\n    if (currentShapeCopy.exactPathCount === currentShapeCopy.paths.length) {\n      currentShapeCopy.paths.push(coordinate);\n    } else {\n      currentShapeCopy.paths[currentShapeCopy.paths.length - 1] = coordinate;\n    }\n    currentShapeCopy.d = getSVGPathD(currentShapeCopy.paths, false);\n    dispatch({\n      type: actionTypes.SET_CURRENT_SHAPE,\n      payload: { currentShape: currentShapeCopy }\n    });\n  };\n\n  // 畫矩形的點\n  const drawRectanglePoint = () => {\n    // finish drawing\n    // 若只有一個點則不能結束該圖形\n    if (currentShape.exactPathCount === 1) return;\n    dispatch({\n      type: actionTypes.SET_LABELBOX_STATUS,\n      payload: {\n        selLabelType,\n        labelBoxVisible: true,\n        labelBoxStatus: labelStatusTypes.CREATE\n      }\n    });\n    resetDrawStatus();\n  };\n\n  // 畫多邊形的點\n  const drawPolygonPoint = () => {\n    if (currentShape.paths.length > 0\n      && Math.abs(currentShape.paths[0].x - mouseCoordinate.x) <= closePointRegion\n      && Math.abs(currentShape.paths[0].y - mouseCoordinate.y) <= closePointRegion\n    ) {\n      // finish drawing\n      // 若只有一個點則不能結束該圖形\n      if (currentShape.exactPathCount === 1) return;\n      dispatch({\n        type: actionTypes.SET_LABELBOX_STATUS,\n        payload: {\n          selLabelType,\n          labelBoxVisible: true,\n          labelBoxStatus: labelStatusTypes.CREATE\n        }\n      });\n      resetDrawStatus();\n    } else {\n      // keep drawing\n      // 若連續點擊相同的位置則不作任何動作\n      if (currentShape.exactPathCount === currentShape.paths.length) return;\n      const currentShapeCopy = cloneDeep(currentShape);\n      currentShapeCopy.paths[currentShapeCopy.paths.length - 1] = { ...mouseCoordinate };\n      currentShapeCopy.exactPathCount += 1;\n      currentShapeCopy.d = getSVGPathD(currentShapeCopy.paths, false);\n      dispatch({\n        type: actionTypes.SET_CURRENT_SHAPE,\n        payload: { currentShape: currentShapeCopy }\n      });\n    }\n  };\n\n  const isLeftMouseClick = event => event.button === 0;\n\n  const onSVGMouseMove = event => {\n    const coordinate = getMouseCoordinate(event);\n    mouseDispatch({\n      type: mouseActionTypes.SET_MOUSE_COORDINATE,\n      payload: { mouseCoordinate: coordinate }\n    });\n\n    if (drawStatus !== drawStatusTypes.DRAWING && !currentShape) return;\n    switch (selShapeType) {\n      case shapeTypes.RECTANGLE:\n        movingRectangle(coordinate);\n        break;\n      case shapeTypes.POLYGON:\n        movingPolygon(coordinate);\n        break;\n      default:\n    }\n  };\n\n  const onSVGMouseUp = event => {\n    // 若非滑鼠左鍵則不做任何動作\n    if (!isLeftMouseClick(event)) return;\n    // 若滑鼠的座標在圖片外則不做任何動作\n    if (!isValidCoordinate({ ...mouseCoordinate })) return;\n    // 如果有圖形已被選擇則清除被選擇圖形\n    if (drawStatus === drawStatusTypes.SELECT) {\n      dispatch({ type: actionTypes.SET_SEL_SHAPE_INDEX, payload: { selShapeIndex: null } });\n      return;\n    }\n\n    if (drawStatus === drawStatusTypes.IDLE) {\n      // start drawing\n      const newShape = shapeFactory(mouseCoordinate);\n      dispatch({\n        type: actionTypes.SET_CURRENT_SHAPE,\n        payload: { currentShape: newShape }\n      });\n      dispatch({\n        type: actionTypes.SET_DRAW_STATUS,\n        payload: { drawStatus: drawStatusTypes.DRAWING }\n      });\n    } else if (drawStatus === drawStatusTypes.DRAWING && currentShape) {\n      switch (selShapeType) {\n        case shapeTypes.RECTANGLE:\n          drawRectanglePoint();\n          break;\n        case shapeTypes.POLYGON:\n          drawPolygonPoint();\n          break;\n        default:\n      }\n    }\n  };\n\n  const onShapeMouseUp = (event, index) => {\n    if (!isLeftMouseClick(event)) return;\n    // can not select shape when drawing\n    if (drawStatus === drawStatusTypes.DRAWING) return;\n\n    event.stopPropagation();\n    dispatch({\n      type: actionTypes.SET_SEL_SHAPE_INDEX,\n      payload: { selShapeIndex: index === selShapeIndex ? null : index }\n    });\n  };\n\n  return (\n    <div className=\"svg-wrapper\">\n      {imageFiles[selDrawImageIndex] && (\n        <svg\n          className=\"svg-container\"\n          ref={svgRef}\n          viewBox={`0 0 ${imageSizes[selDrawImageIndex].width} ${imageSizes[selDrawImageIndex].height}`}\n          onMouseMove={onSVGMouseMove}\n          onMouseUp={onSVGMouseUp}\n        >\n          <SVGImage {...imageProps} />\n\n          {currentShape && (\n            <g>\n              <path\n                d={currentShape.d}\n                style={{ ...drawingShapePathStyle }}\n              />\n              {currentShape.paths.map(point => (\n                <circle\n                  key={uuidv4()}\n                  cx={point.x}\n                  cy={point.y}\n                  style={{ ...drawingShapePointStyle }}\n                  r={drawingShapePointStyle.strokeWidth}\n                />\n              ))}\n            </g>\n          )}\n\n          {shapes[selDrawImageIndex] && shapes[selDrawImageIndex].map((shape, index) => (\n            !shape.visible ? null : (\n              <g key={shape.d}>\n                <path\n                  d={shape.d}\n                  style={shape.isSelect ? { ...selShapeStyle } : { ...shapeStyle }}\n                  onMouseUp={event => onShapeMouseUp(event, index)}\n                />\n                {shape.label && (\n                  <text\n                    x={getShapeXYMaxMin(shape.paths).xmin}\n                    y={getShapeXYMaxMin(shape.paths).ymin}\n                    style={{ ...labelStyle }}\n                  >\n                    {shape.label}\n                  </text>\n                )}\n              </g>\n            )\n          ))}\n        </svg>\n      )}\n    </div>\n  );\n}\n\nexport default SVGWrapper;\n","import {\n  Row, Col, Checkbox, Space, Button\n} from 'antd';\nimport { DeleteOutlined } from '@ant-design/icons';\nimport PropTypes from 'prop-types';\nimport { useStoreContext } from '../../../contexts/StoreContext';\nimport actionTypes from '../../../contexts/StoreContext/actionTypes';\nimport { drawStatusTypes } from '../../../constants';\n\nfunction FileItem(props) {\n  const { index: fileIndex, name } = props;\n  const { state, dispatch } = useStoreContext();\n  const {\n    imageFiles, selDrawImageIndex, selImageIndexes, imageSizes, drawStatus, shapes, selShapeIndex\n  } = state;\n\n  const onCheckChange = event => {\n    const set = new Set([...selImageIndexes]);\n    if (event.target.checked) set.add(fileIndex);\n    else set.delete(fileIndex);\n    dispatch({ type: actionTypes.SET_SEL_IMAGE_INDEXES, payload: { selImageIndexes: [...set] } });\n  };\n\n  const onItemClick = () => {\n    dispatch({ type: actionTypes.SET_SEL_SHAPE_INDEX, payload: { selShapeIndex: null } });\n    dispatch({\n      type: actionTypes.SET_SEL_DRAW_IMAGE_INDEX,\n      payload: { selDrawImageIndex: fileIndex }\n    });\n  };\n\n  const onXMLPreviewClick = () => {\n    dispatch({\n      type: actionTypes.SET_XML_PREVIEW_BOX_STATUS,\n      payload: {\n        selPreviewIndex: fileIndex,\n        xmlPreviewBoxVisible: true\n      }\n    });\n  };\n\n  const onItemDeleteClick = () => {\n    const newImageFiles = imageFiles.filter((item, index) => index !== fileIndex);\n    let newSelDrawImageIndex = selDrawImageIndex;\n    if (newImageFiles.length === 0) {\n      newSelDrawImageIndex = null;\n    } else if (fileIndex <= selDrawImageIndex && selDrawImageIndex !== 0) {\n      newSelDrawImageIndex = selDrawImageIndex - 1;\n    }\n    dispatch({\n      type: actionTypes.SET_IMAGE_FILES,\n      payload: {\n        imageFiles: newImageFiles,\n        selDrawImageIndex: newSelDrawImageIndex,\n        imageSizes: imageSizes.filter((item, index) => index !== fileIndex),\n        drawStatus: fileIndex === selDrawImageIndex ? drawStatusTypes.IDLE : drawStatus,\n        shapes: shapes.filter((item, index) => index !== fileIndex),\n        selShapeIndex: fileIndex === selDrawImageIndex ? null : selShapeIndex\n      }\n    });\n  };\n\n  return (\n    <Row type=\"flex\" justify=\"space-between\" style={{ padding: '8px 16px' }}>\n      <Col xs={3}>\n        <Checkbox\n          checked={selImageIndexes.indexOf(fileIndex) !== -1}\n          onChange={onCheckChange}\n        />\n      </Col>\n      <Col xs={15}>\n        <div\n          title={name}\n          onClick={onItemClick}\n          className=\"file-item-name\"\n          style={{\n            color: (fileIndex === selDrawImageIndex) ? '#ff4d4f' : '#000000d9'\n          }}\n        >\n          {name}\n        </div>\n      </Col>\n      <Col xs={6} style={{ textAlign: 'end' }}>\n        <Space>\n          <Button\n            size=\"small\"\n            shape=\"circle\"\n            title={shapes[fileIndex] ? `Total labels: ${shapes[fileIndex].length}` : ''}\n            onClick={onXMLPreviewClick}\n          >\n            {shapes[fileIndex] ? shapes[fileIndex].length : ''}\n          </Button>\n          <Button\n            type=\"primary\"\n            danger\n            size=\"small\"\n            shape=\"circle\"\n            title=\"Delete file\"\n            icon={<DeleteOutlined />}\n            onClick={onItemDeleteClick}\n          />\n        </Space>\n      </Col>\n    </Row>\n  );\n}\n\nFileItem.propTypes = {\n  index: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired\n};\n\nexport default FileItem;\n","import { Row, Col } from 'antd';\nimport FileItem from './FileItem';\nimport { useStoreContext } from '../../../contexts/StoreContext';\n\nfunction FileList() {\n  const { state } = useStoreContext();\n  const { imageFiles } = state;\n\n  return (\n    <Row type=\"flex\" justify=\"start\" style={{ overflow: 'auto' }}>\n      {imageFiles.map((item, index) => (\n        <Col key={item.name} xs={24}>\n          <FileItem index={index} name={item.name} />\n        </Col>\n      ))}\n    </Row>\n  );\n}\n\nexport default FileList;\n","import {\n  Menu, Dropdown, Button, message\n} from 'antd';\nimport { SettingOutlined } from '@ant-design/icons';\nimport { useStoreContext } from '../../../contexts/StoreContext';\nimport actionTypes from '../../../contexts/StoreContext/actionTypes';\nimport { drawStatusTypes } from '../../../constants';\nimport { generateXML, exportZip } from '../../../utils';\n\nfunction FileListSetting() {\n  const { state, dispatch } = useStoreContext();\n  const {\n    imageFiles, selDrawImageIndex, selImageIndexes, imageSizes, drawStatus, shapes, selShapeIndex\n  } = state;\n\n  const onSelectClick = isAll => {\n    if (!isAll && selImageIndexes.length === 0) return;\n    const indexes = isAll ? imageFiles.map((item, index) => index) : [];\n    dispatch({\n      type: actionTypes.SET_SEL_IMAGE_INDEXES,\n      payload: { selImageIndexes: indexes }\n    });\n  };\n\n  const onClearSelectClick = () => {\n    if (selImageIndexes.length === 0) return;\n    const newImageFiles = imageFiles.filter((item, index) => (\n      selImageIndexes.indexOf(index) === -1\n    ));\n    const newShapes = shapes.filter((item, index) => (\n      selImageIndexes.indexOf(index) === -1\n    ));\n    const newImageSizes = imageSizes.filter((item, index) => (\n      selImageIndexes.indexOf(index) === -1\n    ));\n    let newSelDrawImageIndex = selDrawImageIndex;\n    if (newImageFiles.length === 0) {\n      newSelDrawImageIndex = null;\n    } else if (selImageIndexes.indexOf(selDrawImageIndex) !== -1) {\n      newSelDrawImageIndex = 0;\n    } else {\n      selImageIndexes.forEach(item => {\n        if (item < selDrawImageIndex) newSelDrawImageIndex--;\n      });\n    }\n    dispatch({\n      type: actionTypes.SET_IMAGE_FILES,\n      payload: {\n        imageFiles: newImageFiles,\n        selDrawImageIndex: newSelDrawImageIndex,\n        imageSizes: newImageSizes,\n        drawStatus: selImageIndexes.indexOf(selDrawImageIndex) === -1\n          ? drawStatus : drawStatusTypes.IDLE,\n        shapes: newShapes,\n        selShapeIndex: selImageIndexes.indexOf(selDrawImageIndex) === -1 ? selShapeIndex : null\n      }\n    });\n  };\n\n  const onClearAllClick = () => {\n    dispatch({\n      type: actionTypes.SET_IMAGE_FILES,\n      payload: {\n        imageFiles: [],\n        selDrawImageIndex: null,\n        imageSizes: [],\n        drawStatus: drawStatusTypes.IDLE,\n        shapes: [],\n        selShapeIndex: null\n      }\n    });\n  };\n\n  const onSaveSelectClick = () => {\n    if (selImageIndexes.length === 0) {\n      message.info('No images are selected.');\n      return;\n    }\n    const files = [];\n    const xmls = [];\n    imageFiles.forEach((file, index) => {\n      if (selImageIndexes.indexOf(index) === -1) return;\n      files.push(file);\n      const xml = generateXML(\n        file,\n        imageSizes[index],\n        shapes[index]\n      );\n      xmls.push(xml);\n    });\n    exportZip(files, xmls);\n  };\n\n  const onSaveAllClick = () => {\n    if (imageFiles.length === 0) {\n      message.info('No images are loaded.');\n      return;\n    }\n    const xmls = imageFiles.map((file, index) => (\n      generateXML(file, imageSizes[index], shapes[index])\n    ));\n    exportZip(imageFiles, xmls);\n  };\n\n  const menu = (\n    <Menu>\n      <Menu.Item>\n        <Button type=\"text\" size=\"small\" onClick={() => onSelectClick(true)}>Select All</Button>\n      </Menu.Item>\n      <Menu.Item>\n        <Button type=\"text\" size=\"small\" onClick={() => onSelectClick(false)}>Select None</Button>\n      </Menu.Item>\n      <Menu.Item>\n        <Button type=\"text\" size=\"small\" onClick={onClearSelectClick}>Clear Select</Button>\n      </Menu.Item>\n      <Menu.Item>\n        <Button type=\"text\" size=\"small\" onClick={onClearAllClick}>Clear All</Button>\n      </Menu.Item>\n      <Menu.Item>\n        <Button type=\"text\" size=\"small\" onClick={onSaveSelectClick}>Save Select</Button>\n      </Menu.Item>\n      <Menu.Item>\n        <Button type=\"text\" size=\"small\" onClick={onSaveAllClick}>Save All</Button>\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <Dropdown overlay={menu} placement=\"bottomRight\" arrow>\n      <SettingOutlined />\n    </Dropdown>\n  );\n}\n\nexport default FileListSetting;\n","import {\n  Row, Col, Space, Button\n} from 'antd';\nimport {\n  EyeOutlined, EyeInvisibleOutlined, EditOutlined, DeleteOutlined\n} from '@ant-design/icons';\nimport PropTypes from 'prop-types';\nimport { cloneDeep } from 'lodash';\nimport { useStoreContext } from '../../../contexts/StoreContext';\nimport actionTypes from '../../../contexts/StoreContext/actionTypes';\nimport { labelStatusTypes } from '../../../constants';\n\nfunction LabelItem(props) {\n  const { index, label, visible } = props;\n  const { state, dispatch } = useStoreContext();\n  const { selDrawImageIndex, shapes, selShapeIndex } = state;\n\n  const onItemClick = () => {\n    dispatch({\n      type: actionTypes.SET_SEL_SHAPE_INDEX,\n      payload: { selShapeIndex: index === selShapeIndex ? null : index }\n    });\n  };\n\n  const onItemVisibleClick = () => {\n    const shapesCopy = cloneDeep(shapes);\n    shapesCopy[selDrawImageIndex][index].visible = !shapesCopy[selDrawImageIndex][index].visible;\n    dispatch({ type: actionTypes.SET_SHAPES, payload: { shapes: shapesCopy } });\n    if (index === selShapeIndex) {\n      dispatch({ type: actionTypes.SET_SEL_SHAPE_INDEX, payload: { selShapeIndex: null } });\n    }\n  };\n\n  const onItemEditClick = () => {\n    dispatch({ type: actionTypes.SET_CURRENT_SHAPE, payload: { currentShape: null } });\n    dispatch({ type: actionTypes.SET_SEL_SHAPE_INDEX, payload: { selShapeIndex: index } });\n    dispatch({\n      type: actionTypes.SET_LABELBOX_STATUS,\n      payload: {\n        selLabelType: label,\n        labelBoxVisible: true,\n        labelBoxStatus: labelStatusTypes.UPDATE\n      }\n    });\n  };\n\n  const onItemDeleteClick = () => {\n    const shapesCopy = cloneDeep(shapes);\n    shapesCopy[selDrawImageIndex].splice(index, 1);\n    dispatch({\n      type: actionTypes.SET_SHAPES,\n      payload: { shapes: shapesCopy }\n    });\n    if (index === selShapeIndex) {\n      dispatch({ type: actionTypes.SET_SEL_SHAPE_INDEX, payload: { selShapeIndex: null } });\n    } else if (index < selShapeIndex) {\n      dispatch({\n        type: actionTypes.SET_SEL_SHAPE_INDEX,\n        payload: { selShapeIndex: selShapeIndex - 1 }\n      });\n    }\n  };\n\n  return (\n    <Row type=\"flex\" justify=\"space-between\" style={{ padding: '8px 16px' }}>\n      <Col xs={14}>\n        <div\n          title={label}\n          onClick={onItemClick}\n          className=\"label-item-name\"\n          style={{\n            color: (index === selShapeIndex) ? '#ff4d4f' : '#000000d9'\n          }}\n        >\n          {label}\n        </div>\n      </Col>\n      <Col xs={10} style={{ textAlign: 'end' }}>\n        <Space>\n          <Button\n            size=\"small\"\n            shape=\"circle\"\n            title={visible ? 'Hide label' : 'Show label'}\n            icon={visible ? <EyeInvisibleOutlined /> : <EyeOutlined />}\n            onClick={onItemVisibleClick}\n          />\n          <Button\n            type=\"primary\"\n            size=\"small\"\n            shape=\"circle\"\n            title=\"Edit label\"\n            icon={<EditOutlined />}\n            onClick={onItemEditClick}\n          />\n          <Button\n            type=\"primary\"\n            danger\n            size=\"small\"\n            shape=\"circle\"\n            title=\"Delete label\"\n            icon={<DeleteOutlined />}\n            onClick={onItemDeleteClick}\n          />\n        </Space>\n      </Col>\n    </Row>\n  );\n}\n\nLabelItem.propTypes = {\n  index: PropTypes.number.isRequired,\n  label: PropTypes.string.isRequired,\n  visible: PropTypes.bool.isRequired\n};\n\nexport default LabelItem;\n","import { Row, Col } from 'antd';\nimport LabelItem from './LabelItem';\nimport { useStoreContext } from '../../../contexts/StoreContext';\n\nfunction LabelList() {\n  const { state } = useStoreContext();\n  const { selDrawImageIndex, shapes } = state;\n\n  return (\n    <Row type=\"flex\" justify=\"start\" style={{ overflow: 'auto' }}>\n      {shapes[selDrawImageIndex]\n      && shapes[selDrawImageIndex].map((item, index) => (\n        <Col key={item.d} xs={24}>\n          <LabelItem index={index} label={item.label} visible={item.visible} />\n        </Col>\n      ))}\n    </Row>\n  );\n}\n\nexport default LabelList;\n","import { Menu, Dropdown, Button } from 'antd';\nimport { SettingOutlined } from '@ant-design/icons';\nimport { cloneDeep } from 'lodash';\nimport { useStoreContext } from '../../../contexts/StoreContext';\nimport actionTypes from '../../../contexts/StoreContext/actionTypes';\n\nfunction LabelListSetting() {\n  const { state, dispatch } = useStoreContext();\n  const { selDrawImageIndex, shapes, selShapeIndex } = state;\n\n  const onShowAllClick = visible => {\n    if (shapes[selDrawImageIndex].length === 0) return;\n    const shapesCopy = cloneDeep(shapes);\n    shapesCopy[selDrawImageIndex] = shapesCopy[selDrawImageIndex].map(item => {\n      if (item.visible === visible) return item;\n      const itemCopy = cloneDeep(item);\n      itemCopy.visible = visible;\n      return itemCopy;\n    });\n    dispatch({ type: actionTypes.SET_SHAPES, payload: { shapes: shapesCopy } });\n    if (selShapeIndex) {\n      dispatch({ type: actionTypes.SET_SEL_SHAPE_INDEX, payload: { selShapeIndex: null } });\n    }\n  };\n\n  const onClearAllClick = () => {\n    if (shapes[selDrawImageIndex].length === 0) return;\n    dispatch({ type: actionTypes.DELETE_ALL_SHAPES });\n  };\n\n  const menu = (\n    <Menu>\n      <Menu.Item>\n        <Button type=\"text\" size=\"small\" onClick={() => onShowAllClick(true)}>Show All</Button>\n      </Menu.Item>\n      <Menu.Item>\n        <Button type=\"text\" size=\"small\" onClick={() => onShowAllClick(false)}>Hide All</Button>\n      </Menu.Item>\n      <Menu.Item>\n        <Button type=\"text\" size=\"small\" onClick={onClearAllClick}>Clear All</Button>\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <Dropdown overlay={menu} placement=\"bottomRight\" arrow>\n      <SettingOutlined />\n    </Dropdown>\n  );\n}\n\nexport default LabelListSetting;\n","import { Collapse } from 'antd';\nimport FileList from './FileList';\nimport FileListSetting from './FileList/FileListSetting';\nimport LabelList from './LabelList';\nimport LabelListSetting from './LabelList/LabelListSetting';\nimport { useStoreContext } from '../../contexts/StoreContext';\n\nconst { Panel } = Collapse;\n\nfunction RightToolbar() {\n  const { state } = useStoreContext();\n  const {\n    imageFiles, selDrawImageIndex, shapes\n  } = state;\n\n  return (\n    <Collapse\n      bordered={false}\n      expandIconPosition=\"left\"\n      defaultActiveKey={['file', 'label']}\n    >\n      <Panel\n        key=\"file\"\n        header={`File List (${imageFiles.length})`}\n        collapsible=\"header\"\n        extra={<FileListSetting />}\n      >\n        <FileList />\n      </Panel>\n      <Panel\n        key=\"label\"\n        header={selDrawImageIndex !== null\n          ? `Label List (${shapes[selDrawImageIndex].length})` : 'Label List (0)'}\n        collapsible=\"header\"\n        extra={<LabelListSetting />}\n      >\n        <LabelList />\n      </Panel>\n    </Collapse>\n  );\n}\n\nexport default RightToolbar;\n","import { Row, Col } from 'antd';\nimport { useStoreContext } from '../../contexts/StoreContext';\nimport { useMouseContext } from '../../contexts/MouseContext';\n\nfunction StatusInfo() {\n  const { state } = useStoreContext();\n  const { state: mouseState } = useMouseContext();\n  const {\n    imageFiles, selDrawImageIndex, drawStatus, imageSizes\n  } = state;\n  const { mouseCoordinate } = mouseState;\n\n  return (\n    <Row\n      type=\"flex\"\n      justify=\"space-between\"\n      align=\"middle\"\n      gutter={[4, 4]}\n      style={{ height: '100%', width: '100%', padding: '0 4px' }}\n    >\n      <Col>\n        {`Status: ${drawStatus}`}\n      </Col>\n      {imageFiles[selDrawImageIndex] && (\n        <Col>\n          {`${mouseCoordinate.x} x ${mouseCoordinate.y} px / ${imageSizes[selDrawImageIndex].width} x ${imageSizes[selDrawImageIndex].height} px`}\n        </Col>\n      )}\n    </Row>\n  );\n}\n\nexport default StatusInfo;\n","import { useRef, useState } from 'react';\nimport {\n  Modal, Row, Col, Input, Card, Button\n} from 'antd';\nimport { DeleteOutlined } from '@ant-design/icons';\nimport Draggable from 'react-draggable';\nimport { cloneDeep } from 'lodash';\nimport { useStoreContext } from '../../contexts/StoreContext';\nimport actionTypes from '../../contexts/StoreContext/actionTypes';\nimport { getSVGPathD } from '../../utils';\nimport { labelStatusTypes } from '../../constants';\n\nfunction LabelBox() {\n  const { state, dispatch } = useStoreContext();\n  const {\n    selDrawImageIndex, currentShape, shapes, selShapeIndex,\n    selLabelType, labelBoxStatus, labelBoxVisible, labelTypes\n  } = state;\n  const draggleRef = useRef(null);\n  const [disabled, setDisabled] = useState(true);\n  const [bounds, setBounds] = useState({\n    left: 0, top: 0, bottom: 0, right: 0\n  });\n\n  const onOk = () => {\n    if (!selLabelType) return;\n    const shapesCopy = cloneDeep(shapes);\n    if (labelBoxStatus === labelStatusTypes.CREATE) {\n      const currentShapeCopy = cloneDeep(currentShape);\n      currentShapeCopy.paths.pop();\n      currentShapeCopy.d = getSVGPathD(currentShapeCopy.paths, true);\n      currentShapeCopy.label = selLabelType;\n      shapesCopy[selDrawImageIndex] = [...shapesCopy[selDrawImageIndex], currentShapeCopy];\n    } else if (labelBoxStatus === labelStatusTypes.UPDATE) {\n      shapesCopy[selDrawImageIndex][selShapeIndex].label = selLabelType;\n    }\n    dispatch({ type: actionTypes.SET_SHAPES, payload: { shapes: shapesCopy } });\n    dispatch({\n      type: actionTypes.SET_LABELBOX_STATUS,\n      payload: {\n        selLabelType,\n        labelBoxVisible: false,\n        labelBoxStatus: labelStatusTypes.IDLE\n      }\n    });\n    dispatch({ type: actionTypes.SET_SEL_SHAPE_INDEX, payload: { selShapeIndex: null } });\n    if (!new Set(labelTypes).has(selLabelType)) {\n      dispatch({\n        type: actionTypes.SET_LABEL_TYPES,\n        payload: { labelTypes: [selLabelType, ...labelTypes]  }\n      });\n    }\n  };\n\n  const onCancel = () => {\n    dispatch({ type: actionTypes.SET_CURRENT_SHAPE, payload: { currentShape: null } });\n    dispatch({\n      type: actionTypes.SET_LABELBOX_STATUS,\n      payload: {\n        selLabelType,\n        labelBoxVisible: false,\n        labelBoxStatus: labelStatusTypes.IDLE\n      }\n    });\n    dispatch({ type: actionTypes.SET_SEL_SHAPE_INDEX, payload: { selShapeIndex: null } });\n  };\n\n  const onMouseOver = () => {\n    setDisabled(prev => !prev);\n  };\n\n  const onMouseOut = () => {\n    setDisabled(true);\n  };\n\n  const onStart = (event, uiData) => {\n    const { clientWidth, clientHeight } = window?.document?.documentElement;\n    const targetRect = draggleRef?.current?.getBoundingClientRect();\n    setBounds({\n      left: -targetRect?.left + uiData?.x,\n      right: clientWidth - (targetRect?.right - uiData?.x),\n      top: -targetRect?.top + uiData?.y,\n      bottom: clientHeight - (targetRect?.bottom - uiData?.y)\n    });\n  };\n\n  const onInputLabelChange = event => {\n    dispatch({\n      type: actionTypes.SET_SEL_LABEL_TYPE,\n      payload: { selLabelType: event.target.value }\n    });\n  };\n\n  const onDeleteLableClick = value => {\n    dispatch({\n      type: actionTypes.SET_LABEL_TYPES,\n      payload: { labelTypes: labelTypes.filter(item => item !== value) }\n    });\n  };\n\n  const onLableItemClick = value => {\n    dispatch({ type: actionTypes.SET_SEL_LABEL_TYPE, payload: { selLabelType: value } });\n  };\n\n  return (\n    <Modal\n      width=\"300px\"\n      maskClosable={false}\n      title={(\n        <div\n          style={{ width: '100%', cursor: 'move' }}\n          onMouseOver={onMouseOver}\n          onMouseOut={onMouseOut}\n          // fix eslintjsx-a11y/mouse-events-have-key-events\n          // https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/master/docs/rules/mouse-events-have-key-events.md\n          onFocus={() => {}}\n          onBlur={() => {}}\n          // end\n        >\n          Label Box\n        </div>\n      )}\n      visible={labelBoxVisible}\n      onOk={onOk}\n      onCancel={onCancel}\n      modalRender={modal => (\n        <Draggable\n          disabled={disabled}\n          bounds={bounds}\n          onStart={(event, uiData) => onStart(event, uiData)}\n        >\n          <div ref={draggleRef}>{modal}</div>\n        </Draggable>\n      )}\n      okButtonProps={{\n        disabled: !selLabelType\n      }}\n    >\n      <Row type=\"flex\" justify=\"center\" gutter={[8, 12]}>\n        <Col xs={24}>\n          <Input value={selLabelType} onChange={onInputLabelChange} allowClear />\n        </Col>\n        <Col xs={24}>\n          <Card size=\"small\" style={{ maxHeight: '170px', overflow: 'auto' }}>\n            <Row\n              type=\"flex\"\n              justify=\"center\"\n              gutter={[8, 8]}\n            >\n              {labelTypes.map(item => (\n                <Col key={item} xs={24} className=\"label-item\">\n                  <Row type=\"flex\" justify=\"space-between\" gutter={[8, 8]}>\n                    <Col xs={20}>\n                      <div\n                        title={item}\n                        onClick={() => onLableItemClick(item)}\n                        className=\"label-item-name\"\n                        style={{ width: '100%' }}\n                      >\n                        {item}\n                      </div>\n                    </Col>\n                    <Col xs={4}>\n                      <Button\n                        danger\n                        type=\"primary\"\n                        size=\"small\"\n                        shape=\"circle\"\n                        title=\"Delete label\"\n                        icon={<DeleteOutlined />}\n                        onClick={() => onDeleteLableClick(item)}\n                      />\n                    </Col>\n                  </Row>\n                </Col>\n              ))}\n            </Row>\n          </Card>\n        </Col>\n      </Row>\n    </Modal>\n  );\n}\n\nexport default LabelBox;\n","import { Modal, Input } from 'antd';\nimport { useStoreContext } from '../../contexts/StoreContext';\nimport actionTypes from '../../contexts/StoreContext/actionTypes';\nimport { generateXML, exportXML } from '../../utils';\n\nconst { TextArea } = Input;\n\nfunction XMLPreviewBox() {\n  const { state, dispatch } = useStoreContext();\n  const {\n    imageFiles, imageSizes, shapes, selPreviewIndex, xmlPreviewBoxVisible\n  } = state;\n\n  const onOk = () => {\n    const xml = generateXML(\n      imageFiles[selPreviewIndex],\n      imageSizes[selPreviewIndex],\n      shapes[selPreviewIndex]\n    );\n    exportXML(xml, `${imageFiles[selPreviewIndex].name.split('.')[0]}.xml`);\n  };\n\n  const onCancel = () => {\n    dispatch({\n      type: actionTypes.SET_XML_PREVIEW_BOX_STATUS,\n      payload: {\n        selPreviewIndex: null,\n        xmlPreviewBoxVisible: false\n      }\n    });\n  };\n\n  return (\n    <Modal\n      width=\"400px\"\n      maskClosable={false}\n      title=\"XML Previw Box\"\n      visible={xmlPreviewBoxVisible}\n      onOk={onOk}\n      onCancel={onCancel}\n      okText=\"Save\"\n    >\n      {xmlPreviewBoxVisible && (\n        <TextArea\n          rows={10}\n          value={generateXML(\n            imageFiles[selPreviewIndex],\n            imageSizes[selPreviewIndex],\n            shapes[selPreviewIndex]\n          )}\n        />\n      )}\n    </Modal>\n  );\n}\n\nexport default XMLPreviewBox;\n","import { useState } from 'react';\nimport {\n  Modal, Row, Col, Input, Select, message\n} from 'antd';\nimport { useStoreContext } from '../../contexts/StoreContext';\nimport actionTypes from '../../contexts/StoreContext/actionTypes';\nimport { getImage } from '../../utils';\nimport { imageTypes } from '../../constants';\n\nconst { Option } = Select;\n\nfunction ImageURLBox() {\n  const { state, dispatch } = useStoreContext();\n  const {\n    imageFiles, selDrawImageIndex, imageSizes, drawStatus,\n    shapes, selShapeIndex, urlBoxVisible\n  } = state;\n  const [imageUrl, setImageUrl] = useState(null);\n  const [imageName, setImageName] = useState(null);\n  const [imageType, setImageType] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const onImageUrlChange = event => {\n    setImageUrl(event.target.value);\n  };\n\n  const onImageNameChange = event => {\n    setImageName(event.target.value);\n  };\n\n  const onImageTypeChange = value => {\n    setImageType(value);\n  };\n\n  const onOk = async () => {\n    if (!imageUrl || !imageName || !imageType) return;\n    setLoading(true);\n    try {\n      const { file, size } = await getImage(imageUrl, `${imageName}.${imageType}`);\n      dispatch({\n        type: actionTypes.SET_IMAGE_FILES,\n        payload: {\n          imageFiles: [...imageFiles, file],\n          selDrawImageIndex: imageFiles.length ? selDrawImageIndex : 0,\n          imageSizes: [...imageSizes, size],\n          drawStatus,\n          shapes: [...shapes, []],\n          selShapeIndex\n        }\n      });\n      message.success(`Success to load ${imageName}.${imageType}.`);\n      setImageUrl(null);\n      setImageName(null);\n      setImageType(null);\n    } catch (error) {\n      message.error(`Failure to load ${imageName}.${imageType}.`);\n      console.error(error);\n    }\n    setLoading(false);\n  };\n\n  const onCancel = () => {\n    dispatch({\n      type: actionTypes.SET_URL_BOX_STATUS,\n      payload: { urlBoxVisible: false }\n    });\n  };\n\n  return (\n    <Modal\n      width=\"320px\"\n      title=\"Image URL Box\"\n      maskClosable={false}\n      visible={urlBoxVisible}\n      confirmLoading={loading}\n      onOk={onOk}\n      onCancel={onCancel}\n      okText=\"Load\"\n      okButtonProps={{\n        disabled: !(imageUrl && imageName && imageType)\n      }}\n    >\n      {urlBoxVisible && (\n        <Row type=\"flex\" justify=\"center\" gutter={[8, 8]}>\n          <Col xs={24}>\n            <Input\n              allowClear\n              value={imageUrl}\n              onChange={onImageUrlChange}\n              placeholder=\"Image URL\"\n            />\n          </Col>\n          <Col xs={24}>\n            <Input\n              allowClear\n              value={imageName}\n              onChange={onImageNameChange}\n              placeholder=\"Image Name\"\n            />\n          </Col>\n          <Col xs={24}>\n            <Select\n              value={imageType}\n              onChange={onImageTypeChange}\n              placeholder=\"Image Type\"\n              style={{ width: '100%' }}\n            >\n              {imageTypes.map(type => (\n                <Option key={type} value={type}>{type.toUpperCase()}</Option>\n              ))}\n            </Select>\n          </Col>\n        </Row>\n      )}\n    </Modal>\n  );\n}\n\nexport default ImageURLBox;\n","import { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Row, Col } from 'antd';\nimport './index.css';\nimport LeftToolbar from './components/LeftToolbar';\nimport SVGWrapper from './components/SVGWrapper';\nimport RightToolbar from './components/RightToolbar';\nimport StatusInfo from './components/StatusInfo';\nimport LabelBox from './components/LabelBox';\nimport XMLPreviewBox from './components/XMLPreviewBox';\nimport ImageURLBox from './components/ImageURLBox';\nimport { StoreContextProvider } from './contexts/StoreContext';\nimport { MouseContextProvider } from './contexts/MouseContext';\nimport { drawStyleFactory } from './utils';\nimport { drawStatusTypes, labelStatusTypes, shapeTypes } from './constants';\n\nfunction LabelImg(props) {\n  const { labelTypes, closePointRegion } = props;\n\n  const initialStoreState = {\n    imageFiles: [],\n    selDrawImageIndex: null,\n    selImageIndexes: [],\n    imageSizes: [],\n    drawStyle: drawStyleFactory(0),\n    drawStatus: drawStatusTypes.IDLE,   // 畫圖狀態\n    selShapeType: shapeTypes.RECTANGLE, // 已選擇的圖形種類\n    currentShape: null,                 // 目前畫圖的圖形資訊\n    shapes: [],                         // 已畫完的圖形陣列\n    selShapeIndex: null,                // 已選擇圖形的編號\n    labelTypes,\n    selLabelType: null,                 // 已選擇的標籤\n    labelBoxStatus: labelStatusTypes.IDLE,\n    labelBoxVisible: false,\n    selPreviewIndex: null,\n    xmlPreviewBoxVisible: false,\n    urlBoxVisible: false,\n    closePointRegion\n  };\n  const initialMouseState = {\n    mouseCoordinate: { x: 0, y: 0 }\n  };\n\n  const onContextMenu = event => {\n    event.preventDefault();\n  };\n\n  useEffect(() => {\n    document.addEventListener('contextmenu', onContextMenu);\n\n    return () => {\n      document.removeEventListener('contextmenu', onContextMenu);\n    };\n  }, []);\n\n  return (\n    <StoreContextProvider initialState={initialStoreState}>\n      <MouseContextProvider initialState={initialMouseState}>\n        <Row\n          type=\"flex\"\n          justify=\"center\"\n          style={{ height: '100%' }}\n        >\n          <Col xs={24} style={{ height: '100%' }}>\n            <Row\n              type=\"flex\"\n              justify=\"center\"\n              style={{ height: '100%' }}\n            >\n              <Col xs={24} md={3} style={{ maxHeight: '100%', overflow: 'auto' }}>\n                <LeftToolbar />\n              </Col>\n              <Col xs={24} md={16} style={{ height: '100%' }}>\n                <Row\n                  type=\"flex\"\n                  justify=\"center\"\n                  style={{ height: '100%' }}\n                >\n                  <Col xs={24} style={{ height: 'calc(100% - 30px)' }}>\n                    <SVGWrapper />\n                  </Col>\n                  <Col xs={24} style={{ height: '30px' }}>\n                    <StatusInfo />\n                  </Col>\n                </Row>\n              </Col>\n              <Col xs={24} md={5} style={{ maxHeight: '100%', overflow: 'auto' }}>\n                <RightToolbar />\n              </Col>\n              <LabelBox />\n              <XMLPreviewBox />\n              <ImageURLBox />\n            </Row>\n          </Col>\n        </Row>\n      </MouseContextProvider>\n    </StoreContextProvider>\n  );\n}\n\nLabelImg.defaultProps = {\n  labelTypes: [],\n  closePointRegion: 4\n};\n\nLabelImg.propTypes = {\n  labelTypes: PropTypes.arrayOf(PropTypes.string),\n  closePointRegion: PropTypes.number\n};\n\nexport default LabelImg;\n","import LabelImg from './components/LabelImg';\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <LabelImg\n        labelTypes={['Dog', 'Cat']}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import 'react-app-polyfill/ie11';\nimport 'react-app-polyfill/stable';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}